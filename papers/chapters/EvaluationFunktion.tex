\chapter{Evaluationmethode}
\label{chap:evaluationsmethode}

Um die Modelle statistisch auszuwerten werden Evaluationsfunktionen erstellt. Evaluationsfunktionen können Modell-  und Userinnen*parameter auswerten oder auch Funktionen auf Parametern ausführen.
Es gibt zwei unterschiedliche Arten von Evaluationsfunktionen: %TODO auf drei zurück ändern im Falle

\begin{table}[!htbp]
	\begin{tabularx}{\textwidth}{lX}
		\textbf{Iterationsevaluation:} &  Ausführung nach jeder Iteration des Modells\\
	%	\textbf{Postevaluation:} & Ausführung nach jeder Modellsimulation zur Evaluation von Postparametern \\
		\textbf{Modellevaluation:} & Ausführung nach jeder Modellsimulation  \\
	\end{tabularx}
\end{table}

\section{Iterationsevaluation}
\label{sec:evaluationsfunktionen}

%TODO wie wird hier qualität verwendet.. transformiert

Iterationsevaluationsfunktionen werden nach jeder Iteration des Modells ausgeführt. Im folgenden werden einige Funktionen vorgestellt, welche Bewertungsmetriken nach unterschiedlichen Kriterien untersuchen.

%Sämtliche definierten Modellparameter können in der Auswertung einer agentenbasierten Modellierung betrachtet werden.
%Es wird der \textit{Normalized Discounted Cumulative Gain}-Koeffizient (nDCG) verwendet, um die Güte einer Bewertungsmetrik unter den gegebenen Modellparametern zu berechnen. Außerdem wird der Gini-Koeffizient für jeden Modelllauf berechnet, dieser misst, wie fair die Sichtbarkeit von Posts verteilt ist. Durch den nDCG- und den Gini-Koeffizienten lassen sich unterschiedliche Modellkonfigurationen vergleichen.


%TODO Normalisierung der Daten
\subsection{Discounted Cumulative Gain}

Der \textit{Discounted Cumulative Gain}-Koeffizient (DCG) in \cite{Biega2018405} dient zur Berechnung der Güte von Bewertungsmetriken. Der DCG in Formel \ref{dcg} bestraft Bewertungsmetriken, welche Posts mit hoher Qualität auf hintere Rankingpositionen einordnet. Die Qualität eines Posts $Q_{P,i}$ fließt durch den Logarithmus der Rankingposition des Posts ins Verhältnis gesetzt in den DCG ein.

\begin{equation}
\label{dcg}
DCG(B) = \sum_{i = 1}^{N}\frac{2^{Q_{P,i}}-1}{log_2(i + 1)}
\end{equation} 

\paragraph{Normalized Discounted Cumulative Gain}

Der nDCG normalisiert den DCG einer Bewertungsmetrik mit einer idealen Bewertungsmetrik $B_I$, welche die Posts absteigend nach Qualität im Ranking anordnet. $IDCG = DCG(B_I)$ ist der ideale DCG. Mit diesem ergibt sich:

\begin{equation}
\label{ndcg}
nDCG(B) = \frac{DCG(B)}{IDCG} 
\end{equation}

Eine optimale Bewertungsmetrik erhält damit den Maximalwert $nDCG = 1$.

% Spearman rho fabriziert nur blödsinn

%\subsection{Spearman-$\rho$}

%Das Spearman-$\rho$ beschreibt wie stark ein monotoner Zusammenhang zwischen zwei Variablen ausgeprägt ist. Dies kann benfalls genutzt werden um die Güte einer Bewertungsmetrik zu berechnen in Formel \ref{spearman}:

%\begin{equation}
%\label{spearman}
%\rho(B) = \frac{cov(r,rg(Q_{P_s}))}{\sigma_r\sigma_{rg(Q_{P_s})}} 
%\end{equation}

%Dabei ist $r$ das aktuelle Ranking des Modells, ein Vektor, welcher die Postindeces enthält. An $r_i$ steht den Index des Posts der durch die Bewertungmetrik an Stelle $i$ gerankt wurdet. $rg{Q_{P_s}}$ enthält die Indeces der nach Qualität sortierten Posts. $rg(Q_{P_s})_i$ enthält somit den Index des Posts mit der $i$-tbesten Qualität.


\subsection{Gini-Koeffizient}

In \cite{Lerman2014} und \cite{Salganik2006854} gibt der Gini-Koeffizient $G$ an, wie gerecht Aufmerksamkeit der User*innen auf die Posts verteilt ist.
Um die Aufmerksamkeit zu messen, wird die Anzahl der User*innen die einen Post betrachtet haben verwendet. Je größer der Gini-Koeffizient ist, desto ungerechter ist die Verteilung der Views. 
Bei $G = 0$ ist die Aufmerksamkeit gerecht verteilt. Alle Posts wurden von der gleichen Anzahl User*innen gesehen. Wenn ein Post von allen User*innen gesehen wurde, alle andere Posts hingegen von keine*r einzige*n User*in ist $G = 1$ maximal. Der Gini-Koeffizient wird beschrieben durch:

% TODO Da kommt nie 1 raus, sondern immer kleiner
\begin{equation}
G = \frac{1}{2S\sum_{i = 1}^{N}v_{i}}\sum_{i,j}|v_{i} - v_{j} |
\end{equation}

\paragraph{Top-k Gini-Koeffizient}

Der Top-k Gini-Koeffizient berechnet den Gini-Koeffizient für die k qualitativ besten Posts.


%\section{Postevaluation}

\section{Modellevaluation}

Modellevaluationsfunktionen werden nach der vollständigen Simulation eines Modells ausgeführt.

\paragraph{Modellparameter} 

Da sich Modellparameter im Laufe des Modells nicht ändern können, werden diese durch Modellevaluationsfunktionen ausgewertet.

\subsection{Aggregation von Iterationsevaluationsfunktionen}

Für ein Modell mit $N_i$ Iterationsschritten können 
Modellevaluationsfunktionen über den von Iterationsevaluationsfunktionen erzeugten Datenvektor $x$ aggregieren. 

Die im vorherigen Abschnitt vorgestelllten Iterationsevaluationen werden durch die Trapezregel in Formel \ref{trapezoidial} aggregiert und normiert:

\begin{equation}
\label{trapezoidial}
T(x) = \frac{1}{N_i}\sum_{i = 1}^{N_i}x_i - \frac{1}{2}(x_1 + x_N)
\end{equation}

\subsection{Posts ohne Betrachtungen}

Der Prozentsatz an Posts welche von keine*r einzig*en User*in betrachtet wurden werden durch die Funktion in Formel \ref{eq:PoB} gezählt:

\begin{equation}
\label{eq:PoB}
P_{v = 0} = \frac{1}{P_N}\sum_{N = 1}^{P_N} 1_{v_{P_i} = 0}
\end{equation}

wobei $1_{v_{P_i}} = 1$, falls der Post $P_i$ $0$ Betrachtungen besitzt, sonst ist $1_{v_{P_i}} = 0$.

 











